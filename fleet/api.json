{
  "openapi": "3.0.0",
  "info": {
    "title": "Fleet API",
    "description": "Fleet APIs to manage companies, users, drones and equipment",
    "version": "0.0.1-DRAFT"
  },
  "servers": [
    {
      "url": "https://localhost:3000/api/v1",
      "description": "Development Server"
    }
  ],
  "paths": {
    "/fleet/drones": {
      "$ref": "#/components/routes/drones"
    },
    "/fleet/drones/{drone_id}": {
      "$ref": "#/components/routes/drones-{drone_id}"
    },
    "/fleet/drone-providers": {
      "$ref": "#/components/routes/drone-providers"
    },
    "/fleet/drone-providers/{drone_provider_id}": {
      "$ref": "#/components/routes/drone-providers-{drone_provider_id}"
    },
    "/fleet/drone-providers/{drone_provider_id}/drone-models": {
      "$ref": "#/components/routes/drone-providers-{drone_provider_id}-drone-models"
    },
    "/fleet/drone-providers/{drone_provider_id}/drone-models/{drone_model_id}": {
      "$ref": "#/components/routes/drone-providers-{drone_provider_id}-drone-models-{drone_model_id}"
    }
  },
  "tags": [
    {
      "name": "Drones",
      "description": "Drone Management"
    }
  ],
  "components": {
    "routes": {
      "drones": {
        "get": {
          "tags": [
            "Drones"
          ],
          "summary": "Get all drones",
          "description": "Get all drones belonging to the company of the user.",
          "responses": {
            "200": {
              "description": "A successful request",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "success": {
                        "type": "boolean",
                        "example": true,
                        "description": "Status of the response"
                      },
                      "data": {
                        "type": "array",
                        "description": "Array of drones",
                        "items": {
                          "$ref": "#/components/schemas/drone_data"
                        },
                        "example": [
                          {
                            "name": "DRONE-001",
                            "drone_id": "7e7ed56fed0be0f555f8374e980056cd",
                            "model": {
                              "name": "M400 UAV",
                              "model_id": "7e7ed56fed0be0f555f8374e980056cd"
                            },
                            "notes": "Purpose: Security Surveillance",
                            "acquired_on": 1554090304172,
                            "serviceable": true,
                            "shared": false
                          },
                          {
                            "name": "DRONE-002",
                            "drone_id": "7e7ed56fed0be0f555f8374e980056cd",
                            "model": {
                              "name": "M408 UAV",
                              "model_id": "7e7ed56fed0be0f555f8374e980056cd"
                            },
                            "notes": "Purpose: Plantation",
                            "acquired_on": 1554090304172,
                            "serviceable": true,
                            "shared": false
                          }
                        ]
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "post": {
          "tags": [
            "Drones"
          ],
          "summary": "Create new drone",
          "description": "Create a new drone belonging to the company of the user.",
          "requestBody": {
            "description": " **Required values:** `name`, `model_id`<br><br> **Optional values:** `notes`, `acquired_on`, `serviceable`, `shared` ",
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/drone"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "A successful request",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "success": {
                        "type": "boolean",
                        "example": true,
                        "description": "Status of the response"
                      },
                      "data": {
                        "$ref": "#/components/schemas/drone_data"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "drones-{drone_id}": {
        "get": {
          "tags": [
            "Drones"
          ],
          "summary": "Get a drone",
          "description": "Get a specific drone belonging to the company of the user.",
          "parameters": [
            {
              "$ref": "#/components/parameters/drone_id"
            }
          ],
          "responses": {
            "200": {
              "description": "A successful request",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "success": {
                        "type": "boolean",
                        "example": true,
                        "description": "Status of the response"
                      },
                      "data": {
                        "$ref": "#/components/schemas/drone_data"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "patch": {
          "tags": [
            "Drones"
          ],
          "summary": "Update a drone",
          "description": "Update a specific drone belonging to the company of the user.",
          "parameters": [
            {
              "$ref": "#/components/parameters/drone_id"
            }
          ],
          "requestBody": {
            "description": " **Optional values:** `name`, `model_id`, `notes`, `acquired_on`, `serviceable`, `shared` ",
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/drone"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "A successful request",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "success": {
                        "type": "boolean",
                        "example": true,
                        "description": "Status of the response"
                      },
                      "data": {
                        "$ref": "#/components/schemas/drone_data"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "delete": {
          "tags": [
            "Drones"
          ],
          "summary": "Delete a drone",
          "description": "Delete a specific drone belonging to the company of the user.",
          "parameters": [
            {
              "$ref": "#/components/parameters/drone_id"
            }
          ],
          "responses": {
            "200": {
              "description": "A successful request",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "success": {
                        "type": "boolean",
                        "example": true,
                        "description": "Status of the response"
                      },
                      "data": {
                        "$ref": "#/components/schemas/drone_data"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "drone-providers": {
        "get": {
          "tags": [
            "Drones"
          ],
          "summary": "Get all drone providers",
          "description": "Get all drones providers belonging to the company of the user.",
          "responses": {
            "200": {
              "description": "A successful request",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "success": {
                        "type": "boolean",
                        "example": true,
                        "description": "Status of the response"
                      },
                      "data": {
                        "type": "array",
                        "description": "Array of drone providers",
                        "items": {
                          "$ref": "#/components/schemas/drone_provider_data"
                        },
                        "example": [
                          {
                            "name": "Garuda Robotics Pte. Ltd.",
                            "drone_provider_id": "0c5c21b6a42fadb018a5d1863c34b35d",
                            "brand": "Garuda",
                            "country": "Singapore"
                          },
                          {
                            "name": "Rugada Robotics Pte. Ltd.",
                            "drone_provider_id": "0c5c21b6a42fadb018a5d1863c34b35d",
                            "brand": "Rugada",
                            "country": "Malaysia"
                          }
                        ]
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "post": {
          "tags": [
            "Drones"
          ],
          "summary": "Create new drone provider",
          "description": "Create a new drone provider belonging to the company of the user.",
          "requestBody": {
            "description": " **Required values:** `name`, `brand`, `country` ",
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/drone_provider"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "A successful request",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "success": {
                        "type": "boolean",
                        "example": true,
                        "description": "Status of the response"
                      },
                      "data": {
                        "$ref": "#/components/schemas/drone_provider_data"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "drone-providers-{drone_provider_id}": {
        "get": {
          "tags": [
            "Drones"
          ],
          "summary": "Get a drone provider",
          "description": "Get a specific drone provider belonging the company of the user.",
          "parameters": [
            {
              "$ref": "#/components/parameters/drone_provider_id"
            }
          ],
          "responses": {
            "200": {
              "description": "A successful request",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "success": {
                        "type": "boolean",
                        "example": true,
                        "description": "Status of the response"
                      },
                      "data": {
                        "$ref": "#/components/schemas/drone_provider_data"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "patch": {
          "tags": [
            "Drones"
          ],
          "summary": "Update a drone provider",
          "description": "Update a specific drone provider belonging the company of the user.",
          "parameters": [
            {
              "$ref": "#/components/parameters/drone_provider_id"
            }
          ],
          "requestBody": {
            "description": " **Optional values:** `name`, `brand`, `country` ",
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/drone_provider"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "A successful request",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "success": {
                        "type": "boolean",
                        "example": true,
                        "description": "Status of the response"
                      },
                      "data": {
                        "$ref": "#/components/schemas/drone_provider_data"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "delete": {
          "tags": [
            "Drones"
          ],
          "summary": "Delete a drone provider",
          "description": "Delete a specific drone provider belonging to the company of the user.",
          "parameters": [
            {
              "$ref": "#/components/parameters/drone_provider_id"
            }
          ],
          "responses": {
            "200": {
              "description": "A successful request",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "success": {
                        "type": "boolean",
                        "example": true,
                        "description": "Status of the response"
                      },
                      "data": {
                        "$ref": "#/components/schemas/drone_provider_data"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "drone-providers-{drone_provider_id}-drone-models": {
        "get": {
          "tags": [
            "Drones"
          ],
          "summary": "Get all drone models",
          "description": "Get all drones models of a specific drone provider belonging to the company of the user.",
          "parameters": [
            {
              "$ref": "#/components/parameters/drone_provider_id"
            }
          ],
          "responses": {
            "200": {
              "description": "A successful request",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "success": {
                        "type": "boolean",
                        "example": true,
                        "description": "Status of the response"
                      },
                      "data": {
                        "type": "array",
                        "description": "Array of drone models",
                        "items": {
                          "$ref": "#/components/schemas/drone_model_data"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "post": {
          "tags": [
            "Drones"
          ],
          "summary": "Create new drone model",
          "description": "Create a new drone model for a specific provider belonging to the company of the user.",
          "parameters": [
            {
              "$ref": "#/components/parameters/drone_provider_id"
            }
          ],
          "requestBody": {
            "description": " **Required values:** `name`, `provider_id`, `category`, `weight`, `properties`<br><br> **Optional values:** `compatibility` ",
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/drone_model"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "A successful request",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "success": {
                        "type": "boolean",
                        "example": true,
                        "description": "Status of the response"
                      },
                      "data": {
                        "$ref": "#/components/schemas/drone_model_data"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "drone-providers-{drone_provider_id}-drone-models-{drone_model_id}": {
        "patch": {
          "tags": [
            "Drones"
          ],
          "summary": "Update a drone model",
          "description": "Update a specific drone model of a specific drone provider belonging to the company of the user.",
          "parameters": [
            {
              "$ref": "#/components/parameters/drone_provider_id"
            },
            {
              "$ref": "#/components/parameters/drone_model_id"
            }
          ],
          "requestBody": {
            "description": " **Optional values:** `name`, `provider_id`, `category`, `weight`, `properties`, `compatibility` ",
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/drone_model"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "A successful request",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "success": {
                        "type": "boolean",
                        "example": true,
                        "description": "Status of the response"
                      },
                      "data": {
                        "$ref": "#/components/schemas/drone_model_data"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "delete": {
          "tags": [
            "Drones"
          ],
          "summary": "Delete a drone model",
          "description": "Delete a specific drone model of a specific drone provider belonging to the company of the user.",
          "parameters": [
            {
              "$ref": "#/components/parameters/drone_provider_id"
            },
            {
              "$ref": "#/components/parameters/drone_model_id"
            }
          ],
          "responses": {
            "200": {
              "description": "A successful request",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "success": {
                        "type": "boolean",
                        "example": true,
                        "description": "Status of the response"
                      },
                      "data": {
                        "$ref": "#/components/schemas/drone_model_data"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "parameters": {
      "drone_id": {
        "name": "drone_id",
        "in": "path",
        "required": true,
        "description": "Drone ID",
        "schema": {
          "type": "string"
        }
      },
      "drone_provider_id": {
        "name": "drone_provider_id",
        "in": "path",
        "required": true,
        "description": "Drone provider ID",
        "schema": {
          "type": "string"
        }
      },
      "drone_model_id": {
        "name": "drone_model_id",
        "in": "path",
        "required": true,
        "description": "Drone model ID",
        "schema": {
          "type": "string"
        }
      }
    },
    "schemas": {
      "drone": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "example": "DRONE-001"
          },
          "model_id": {
            "type": "string",
            "example": "7e7ed56fed0be0f555f8374e980056cd",
            "description": "Drone model ID"
          },
          "notes": {
            "type": "string",
            "example": "Primary purpose of drone: surveillance"
          },
          "acquired_on": {
            "type": "number",
            "example": 1554090304172,
            "description": "Date time acquired in milliseconds"
          },
          "serviceable": {
            "type": "boolean",
            "example": true
          },
          "shared": {
            "type": "boolean",
            "example": false
          }
        }
      },
      "drone_data": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "example": "DRONE-001"
          },
          "drone_id": {
            "type": "string",
            "example": "7e7ed56fed0be0f555f8374e980056cd"
          },
          "model": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "model_id": {
                "type": "string"
              }
            },
            "example": {
              "name": "M400 UAV",
              "model_id": "7e7ed56fed0be0f555f8374e980056cd"
            }
          },
          "notes": {
            "type": "string",
            "example": "Primary purpose of drone: surveillance"
          },
          "acquired_on": {
            "type": "number",
            "example": 1554090304172,
            "description": "Date time acquired in milliseconds"
          },
          "serviceable": {
            "type": "boolean",
            "example": true
          },
          "shared": {
            "type": "boolean",
            "example": false
          }
        }
      },
      "drone_provider": {
        "type": "object",
        "required": [
          "name",
          "brand"
        ],
        "properties": {
          "name": {
            "type": "string",
            "example": "Garuda Robotics Pte. Ltd."
          },
          "brand": {
            "type": "string",
            "example": "Garuda"
          },
          "country": {
            "type": "string",
            "example": "Singapore"
          }
        }
      },
      "drone_provider_data": {
        "type": "object",
        "required": [
          "name",
          "brand"
        ],
        "properties": {
          "name": {
            "type": "string",
            "example": "Garuda Robotics Pte. Ltd."
          },
          "drone_provider_id": {
            "type": "string",
            "example": "0c5c21b6a42fadb018a5d1863c34b35d"
          },
          "brand": {
            "type": "string",
            "example": "Garuda"
          },
          "country": {
            "type": "string",
            "example": "Singapore"
          }
        }
      },
      "drone_model": {
        "type": "object",
        "required": [
          "name",
          "category",
          "weight",
          "properties"
        ],
        "properties": {
          "name": {
            "type": "string",
            "example": "M06A"
          },
          "provider_id": {
            "type": "string",
            "example": "0c5c21b6a42fadb018a5d1863c37bb31",
            "description": "A valid drone provider ID"
          },
          "category": {
            "type": "string",
            "example": "Hexacopter"
          },
          "compatibility": {
            "type": "object",
            "properties": {
              "batteries": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "example": [
                  "0c5c21b6a42fadb018a5d1863c37bb31",
                  "0c5c21b6a42fadb018a5d1863c36abd6",
                  "0c5c21b6a42fadb018a5d1863c36c446",
                  "0c5c21b6a42fadb018a5d1863c373f80",
                  "0c5c21b6a42fadb018a5d1863c37565e"
                ]
              },
              "cameras": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "example": [
                  "0c5c21b6a42fadb018a5d1863c35fea4",
                  "0c5c21b6a42fadb018a5d1863c360865"
                ]
              }
            }
          },
          "weight": {
            "type": "number",
            "example": 2.6
          },
          "properties": {
            "type": "object",
            "required": [
              "dimensions",
              "max_flight_time",
              "rc_frequency"
            ],
            "properties": {
              "dimensions": {
                "type": "object",
                "required": [
                  "width",
                  "length",
                  "height"
                ],
                "properties": {
                  "width": {
                    "type": "string",
                    "example": "1.30"
                  },
                  "length": {
                    "type": "string",
                    "example": "1.30"
                  },
                  "height": {
                    "type": "string",
                    "example": "0.30"
                  }
                }
              },
              "max_flight_time": {
                "type": "string",
                "example": "1.7 hours"
              },
              "rc_frequency": {
                "type": "string",
                "example": "2.400 - 2.483GHz"
              }
            }
          }
        }
      },
      "drone_model_data": {
        "type": "object",
        "required": [
          "name",
          "category",
          "weight",
          "properties"
        ],
        "properties": {
          "name": {
            "type": "string",
            "example": "M06A"
          },
          "model_id": {
            "type": "string",
            "example": "0c5c21b6a42fadb018a5d1863c37bb31"
          },
          "provider": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "provider_id": {
                "type": "string"
              }
            },
            "example": {
              "name": "Garuda Robotics",
              "provider_id": "0c5c21b6a42fadb018a5d1863c37bb31"
            }
          },
          "category": {
            "type": "string",
            "example": "Hexacopter"
          },
          "compatibility": {
            "type": "object",
            "properties": {
              "batteries": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "battery_model_name": {
                      "type": "string"
                    },
                    "battery_id": {
                      "type": "string"
                    }
                  }
                }
              },
              "cameras": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "camera_model_name": {
                      "type": "string"
                    },
                    "camera_id": {
                      "type": "string"
                    }
                  }
                }
              }
            },
            "example": {
              "batteries": [
                {
                  "name": "BATT-001",
                  "battery_model_name": "Multistar 6S 6600",
                  "battery_id": "0c5c21b6a42fadb018a5d1863c37bb31"
                }
              ],
              "cameras": [
                {
                  "name": "CAM-001",
                  "camera_model_name": "Git2",
                  "camera_id": "0c5c21b6a42fadb018a5d1863c37bb31"
                }
              ]
            }
          },
          "weight": {
            "type": "number",
            "example": 2.6,
            "description": "Weight of drone in kg"
          },
          "properties": {
            "type": "object",
            "properties": {
              "dimensions": {
                "type": "object",
                "properties": {
                  "width": {
                    "type": "string",
                    "example": "1.30"
                  },
                  "length": {
                    "type": "string",
                    "example": "1.30"
                  },
                  "height": {
                    "type": "string",
                    "example": "0.30"
                  }
                }
              },
              "max_flight_time": {
                "type": "string",
                "example": "1.7 hours"
              },
              "rc_frequency": {
                "type": "string",
                "example": "2.400 - 2.483GHz"
              }
            }
          }
        }
      }
    }
  }
}